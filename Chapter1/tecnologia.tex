%!TEX root = /Users/simo/Documents/PFC/Chapter1/chapter1.tex
\section{Tecnolog\'ia} % (fold)
\label{sec:tecnologia}

Se ha decidido realizar una web con una serie de funcionalidades, pero incluso en ese entorno existen múltiples lenguajes y plataformas para todo tipo de desarrollos. Este documento pretende considerar las posibilidades existentes, y escoger la más adecuada para este proyecto a partir de una serie de criterios.

En un primer acercamiento se pueden diferenciar dos partes claras que forman este proyecto. Primero, el desarrollo de la pizarra, implementando el máximo de funcion:alidades establecidas en la especificación, y segundo, el desarrollo del sistema, con su gestión de usuarios, grupos y pizarras.

\subsection{Pizarra}
A la hora de considerar las posibles tecnologías que permitan implementar una pizarra de este tipo, aparecen múltiples opciones que, en mayor o menor medida, podrían funcionar. Sin embargo, en la especificación se ha definido que la solución debe ser accesible desde una página web, a través de firewalls rigurosos, y con el mínimo de \emph{software extra} posible. Ésto nos deja básicamente con tres posibles opciones, descartando muchos de los lenguajes más clásicos de programación, como podría ser C++.

Dichas opciones son \texttt{JavaScript}, \texttt{Flash/Shockwave} o \texttt{Java}. Otro tipo de aplicaciones como podría ser un \texttt{Control ActiveX} queda descartado desde el principio por su dificultad de ejecutar en exploradores que no sean Internet Explorer, y por estar aún más limitados que entornos restrictivos como son los ordenadores de las empresas. Los tres considerados son suficientemente conocidos, y están soportados por la gran mayoría de los ordenadores de hoy día.

Para poder hacer una comparativa objetiva entre ellos, los criterios a seguir serán los siguientes:

\begin{description}
	\item[Facilidad de implementación] Una tecnología que permita desarrollar de forma más rápida también permite desarrollar más y con menos errores.
	\item[Calidad del resultado] Es muy posible que con alguna tecnología el resultado que se llegue a obtener sea de mejor calidad por múltiples razones.
	\item[¿Accesible por todo el mundo?] ¿Es posible que algún usuario tenga alguna limitación que no le permita usar el programa debido al uso de esta tecnología?
	\item[Otras motivaciones] Se considerará también muy importante características como el ser una tecnología novedosa, algo con el que el autor aún no haya trabajado, tendencias de mercado, etc.
	\item[Viabilidad] Pueden haber razones por las cuales una tecnología es simplemente inviable, ya sean monetarias, de complejidad, adquisición de licencias, etc.
\end{description}


\subsubsection{Flash}
Adobe Flash (anteriormente Macromedia Flash) era originariamente un entorno enfocado al desarrollo de animaciones vectoriales, pero su gran popularidad ha hecho que se haya ido expandiendo hasta convertirse en una plataforma multimedia mucho más interactiva, gracias a \texttt{ActionScript}, el lenguaje mediante el cual se puede programar todo tipo de aplicaciones en flash.

\begin{description}
	\item[Facilidad de implementación] Es muy posible que de las tres tecnologías esta fuera la que permita una implementación más sencilla de la pizarra en si, pues Flash proporciona todas las herramientas necesarias para tratar los dibujos que se necesitan hacer. Un magnífico ejemplo de pizarra interactiva puede encontrarse en \url{www.imaginationcubed.com}. En cuanto a las funcionalidades de pizarra compartida, Flash ofrece \emph{Flash Media Server}\footnote{Adobe, Flash Media Server Products - \url{http://www.adobe.com/products/flashmediaserver/}}, que soluciona todas las necesidades de aplicaciones en tiempo real y compartición de objetos.
	\item[Calidad del resultado] Los resultados que se pueden obtener con flash en una aplicación interactiva de este tipo pueden ser más que satisfactorios. La calidad gráfica, así como la interactividad serán tan buenas como el programador/diseñador sea capaz.
	\item[¿Accesible por todo el mundo?] Flash es una tecnología muy extendida por todo el mundo, pero por desgracia suele utilizarse para aplicaciones que muchas empresas podrían considerar como inadecuadas en un espacio de trabajo (juegos en flash o youtube, por ejemplo). Si bien es cierto que la posibilidad de que un ordenador moderno no disponga de flash es muy reducida, no es algo imposible, y mucho menos en el contexto de las empresas.
	\item[Otras motivaciones] Flash es una tecnología que lleva muchos años en el mercado y que ha madurado considerablemente. Sin embargo suele requerir de capacidades de diseñador/animador más que de programador, por tanto no se considera muy adecuada para el perfil del autor.
	\item[Viabilidad] El mayor problema de Adobe Flash es el hecho de que es una tecnología cerrada. La licencia de Flash CS3 Profesional, necesario para desarrollar el programa, cuesta \$699\footnote{Adobe, Flash CS3 Professional - \url{http://www.adobe.com/products/flash/?ogn=EN_US-gntray_prod_flash_home}}, y la licencia para el servidor Flash Media Server asciende a \$4500\footnote{Adobe, Flash Media Interactive Server 3 - \url{http://www.adobe.com/products/flashmediainteractive/}}. Ambos productos están fuera del alcance en cualquier implementación realista. Si bien es cierto que el servidor de desarrollo es gratis, se considera importante que sea posible utilizar el software una vez acabado, si no por cualquier empresa, al menos por la mayoría.
\end{description}

\subsubsection{Java}
Java es un lenguaje de programación en toda regla, que ofrece la posibilidad de generar los llamados applets, enfocados al entorno web, con todas las ventajas (e inconvenientes) de un lenguaje de programación normal y corriente. Dichos applets son integrables en las webs sin problema, siempre y cuando el usuario tenga instalado la JVM (\emph{Java Virtual Machine}).

\begin{description}
	\item[Facilidad de implementación] Java permite hacer prácticamente cualquier cosa, el único problema es que no es un lenguaje pensado especialmente para aplicaciones interactivas como en este caso. Además, para que dichos applets interactúen con el sistema, y por ejemplo, se puedan guardar pizarras, sería conveniente que se funcionase con Servlets y JSP's, lo cual no lo hace más difícil, pero si más restrictivo.
	\item[Calidad del resultado] Al no ser un lenguaje pensado para este tipo de aplicaciones, es posible que el resultado no sea de la calidad que se espera, muy pesado y engorroso para el usuario por tener que cargar el applet. Java suele utilizarse para programas más grandes, o que necesitan de mayor procesado que lo necesario por una pizarra interactiva.
	\item[¿Accesible por todo el mundo?] De forma similar al flash, java está instalado en la mayoría de ordenadores personales, aunque es posible que en menor medida.
	\item[Otras motivaciones] El autor ya ha realizado numerosas aplicaciones en java, incluyendo applets, así como servlets y JSP's, con lo cual se considera poco interesante repetir la experiencia.
	\item[Viabilidad] A pesar de lo que parecen ser numerosos problemas, Java sería una opcion perfectamente factible, dentro de las capacidades del autor, y que resultaría en un programa quizá no tan agradable visualmente como si funcional. Se puede desarrollar en java de forma libre, no habría ningún gasto extra, ni problema de licencias.
\end{description}

\subsubsection{JavaScript}
JavaScript, a diferencia de las otras opciones, es un lenguaje interpretado por los navegadores que permite la ejecución de, en principio, pequeñas acciones dentro de la página web. Dichas acciones pueden ser desde hacer pequeñas operaciones con datos introducidos en un campo de texto, habilitar o desabilitar elementos web, hasta otras cosas mucho más complejas. Javascript es en realidad un lenguaje muy completo que permite hacer una gran variedad de cosas, y esto se ha ido demostrando conforme han ido pasando los años. Ejemplos de webs con un gran uso de javascript podrían ser, por ejemplo, google docs\footnote{Google Docs - \url{http://docs.google.com}} o google mail\footnote{Google Mail - \url{http://mail.google.com}}.

\begin{description}
	\item[Facilidad de implementación] Por desgracia, Javascript se ha utilizado mayoritariamente para pequeñas operaciones como las descritas anteriormente, lo cual ha hecho que haya, en general, poca experiencia a la hora de desarrollar aplicaciones más complejas con él, y lo que ello conlleva (falta de documentación, ejemplos, librerías, etc). Otro problema bastante grande, es el hecho de que sea un lenguaje interpretado por el explorador, y que no todos los exploradores tengan una implementación similar de Javascript. A pesar de los esfuerzos del W3C\footnote{World Wide Web Consortium - \url{http://www.w3c.org}} aún hay diferencias entre implementaciones. Ésto hace que se tengan que tener en cuenta más factores a la hora de programar, haciendo el proceso más complicado.	
	\item[Calidad del resultado] Javascript permite crear aplicaciones muy ágiles para el usuario, utilizando técnicas ya extendidas como Ajax (Asynchronous JavaScript And XML), creando una experiencia de usuario muy positiva. Si bien no está pensado para realizar aplicaciones gráficas, existen ejemplos funcionales de una pizarra similar a la que se quiere implementar, usando Javascript. Existen librerías que permiten trabajar con formas sencillas, como podría ser jsgraphics\footnote{High Performance JavaScript Vector Graphics Library - \url{http://www.walterzorn.com/jsgraphics/jsgraphics_e.htm}}, aunque se intentará encontrar alguna solución mejor.
	\item[¿Accesible por todo el mundo?] Ésta es la tecnología que más personas podrán disfrutar. Solamente hace falta tener un navegador relativamente moderno (Internet Explorer 6+, Mozilla Firefox, Safari, y muchos otros), sin ningún tipo de añadido. El problema reside en el programador, por crear código que sea entendible por todos, no en el usuario.
	\item[Otras motivaciones] Javascript está en auge en estos momentos, se está por fin dando un uso completo a todo su potencial por numerosas compañías, y los resultados son más que sorprendentes. La agilidad de las aplicaciones hace que se empiece a utilizar la web para múltiples tareas que antes estaban relegadas solamente a programas individuales. Existen implementaciones de todo tipo de aplicaciones con javascript, desde clientes de mensajería instantánea, a videojuegos, pasando por clientes de correo, procesadores de texto u hojas de cálculo. El autor aún no ha trabajado con este lenguaje más que en contadas ocasiones y de forma mínima, haciéndolo muy atractivo a la hora de desarrollar un proyecto como este.
	\item[Viabilidad] No hay ninguna razón que haga el uso de javascript inviable, existen pizarras compartidas online ya implementadas con gran éxito, pero no cumplen los requisitos que este proyecto se ha planteado, o son cerradas/de pago.
\end{description}

\subsubsection{Conclusión}
Después de considerar los criterios que se han establecido, se ha decidido utilizar \texttt{Javascript} como técnica para implementar la Pizarra. Flash hace bastante inviable su desarrollo por el alto costo de sus licencias, y aunque se puedan usar licencias de prueba, el producto final sería inviable de utilizar por cualquier empresa que no disponga ya de las licencias de Flash Media Server, y por supuesto totalmente imposible en caso de querer ponerla en funcionamiento por parte del autor. En cuanto a Java, es una solución interesante, y que funcionaría sin demasiados problemas, pero se pretende que sea algo ágil, que cualquiera pueda utilizarlo, y Java suele tener problemas con ello. Javascript es interesante en todos los aspectos, y se considera que permitirá realizar una implementación excelente, además de servir para profundizar más los conocimientos del autor en la materia web actual.

\subsection{Sistema}
Hasta ahora se ha considerado solamente cómo implementar las Pizarra, que si bien es el elemento más importante del proyecto, no es el único. Las funcionalidades que se han definido requieren de otro tipo de lenguajes, de los cuales hay una gran variedad, y se considerarán a continuación bajo los siguientes criterios, similares al apartado anterior.

\begin{description}
	\item[Facilidad de implementación]
	\item[Calidad del resultado]
	\item[Disponibilidad en servidores comunes] 
	\item[Otras motivaciones]
	\item[Viabilidad]
\end{description}

Las opciones a considerar serán \texttt{PHP}, \texttt{JSP/Servlets Java} y \texttt{Ruby}. Existen múltiples lenguajes que permiten programar webs dinámicas, como podrían ser python, perl, o incluso C. Sin embargo no son tan populares en cuanto a desarrollo web se refiere, por lo tanto solamente se considerarán las que son mayoritarias actualmente.

\subsubsection{PHP}
PHP se describe a si mismo como\footnote{\url{http://www.php.net}}:
\begin{quote}
\emph{PHP  is a widely-used general-purpose scripting language that is especially suited for Web development and can be embedded into HTML.}
\end{quote}

PHP se ha convertido en el lenguaje de scripting más popular en la actualidad, utilizado en más de 20 millones de sitios web\footnote{PHP Usage Stats - \url{http://www.php.net/usage.php}}. Ésto, añadido a su licencia libre, hace que exista una comunidad enorme, con todos los beneficios que ello conlleva.

PHP permite generar contenido dinámicamente en el servidor, dependiendo de las numerosas variables existentes. Se pueden ``incrustar'' trozos de código PHP en el html de forma que PHP genere ese contenido haciendo las operaciones necesarias, como por ejemplo, consultando una base de datos.

\begin{description}
	\item[Facilidad de implementación] PHP se considera un lenguaje simple que permite desarrollar sitios de tamaño pequeño o medio con relativa simplicidad. Existen múltiples scripts ya programados que incluso podrían llegar a ayudar en el proceso de implementación del sistema.
	\item[Calidad del resultado] El amplio uso de PHP en sitios web hace que sea un sistema completamente depurado con mínimos agujeros de seguridad, lo cual ayudado por la gran cantidad de documentación de que se dispone, hace que las webs resultantes no tengan nada que envidiar a las producidas por otros lenguajes. Realmente el límite está en manos del programador, no del lenguaje.
	\item[Disponibilidad en servidores comunes] PHP viene con cualquier distribución de linux hoy día, y se puede instalar en prácticamente cualquier sistema operativo.
	\item[Otras motivaciones] El autor de este proyecto ya tiene amplia experiencia en la programación de webs con PHP. No aportaría ningún conocimiento nuevo, más que incrementar la experiencia ya existente.
	\item[Viabilidad] Este proyecto en PHP sería totalmente viable.
\end{description}

\subsubsection{JSP/Servlets Java}
JSP (JavaServer Pages) se puede considerar como una abstración de los Servlets, en un lenguaje más alto. Un JSP se compila generando un servlet, que es código Java, el cual se vuelve a compilar con un compilador Java tradicional.

Simplificando, JSP funciona de forma muy similar a PHP, pero con todo el soporte de Java, y lo que ello conlleva. Hace que sea posible utilizar cualquier clase Java para generar contenidos dinámicos, de la misma forma que PHP usa sus librerías.

\begin{description}
	\item[Facilidad de implementación] JSP es tan simple como Java, y tiene todas las características necesarias para hacer cualquier sitio web. Sin embargo, Java no está tan enfocado a páginas webs como podría ser PHP. Se tiene una gran ventaja en el hecho de que se puede usar cualquier código Java, por tanto, cualquier librería ya hecha, pero también es cierto que al no ser enfocado principalmente a páginas web, pueda hacer tareas comunes (contactar con la base de datos), mucho más engorrosas.
	\item[Calidad del resultado] JSP tiene todo lo necesario para realizar una web de calidad.
	\item[Disponibilidad en servidores comunes] La instalación y configuración de un servidor típico apache para funcionar con JSP's suele requerir más trabajo que con PHP, pues no suele instalarse de forma automática, y requiere de trabajo extra por parte del administrador. Apache Tomcat\footnote{Apache Tomcat - \url{http://tomcat.apache.org}} es implementación oficial de JSP y Java Servlets, y suele ser bastante fácil de encontrar para las respectivas distribuciones. 
	\item[Otras motivaciones] El autor ya ha realizado un proyecto utiliazndo JSP y Java Servlet, si bien no en profundidad, ya conoce las características principales. Sería interesante (o casi imprescindible) si se hubiera decidido usar un Applet Java para el desarrollo de la Pizarra.
	\item[Viabilidad] Este proyecto sería totalmente viable utilizando JSP y Servlets Java, incluso si se utiliza Javascript o Flash para la implementación de las Pizarras.
\end{description}

\subsubsection{Ruby}
Ruby es un lenguaje que está en auje desde hace relatiamente poco, por numerosas razones. La más importante de ellas sea probablemente la plataforma Rails\footnote{Ruby on Rails - \url{http://www.rubyonrails.org/}} (de ahí el conocido Ruby on Rails), que simplifica el proceso de generación de código de forma drástica. Existen numerosos ejemplos en forma de screencasts demostrando la implementación de aplicaciones simples en tiempos menores a 15 minutos\footnote{Screencasts of Ruby on Rails, Creating a weblog in 15 minutes - \url{http://www.rubyonrails.org/screencasts}}.

\begin{description}
	\item[Facilidad de implementación] Ésta es la característica estrella de Ruby on Rails. Simplifica todas las tareas repetitivas a la hora de desarrollar aplicaciones web con un fondo de base de datos, es decir, la mayoría. Lo único que puede dificultar la implementación es la falta de experiencia del autor con esta plataforma.
	\item[Calidad del resultado] El resultado tendrá la misma calidad que el realizado por cualquier otro lenguaje de scripting. Hay argumentos que defienden la mayor calidad de las webs realizadas en ruby por su grandísima simplicidad, lo cual ayuda a una futura expansión mucho más sencilla.
	\item[Disponibilidad en servidores comunes] Ruby se encuentra cada vez más fácilmente en las distribuciones típicas de linux. La forma de configurar un servidor Apache para soportar Ruby es similar a la de cualquier otro lenguaje de scripts, como podría ser Perl. Hace falta tener los paquetes necesarios en el servidor (ruby y rails) y a partir de ahí hay varias formas de hacer que Apache pueda soportar proyectos en rails. Una de las soluciones, por ejemplo, necesita que tenga los módulos rewrite y fcgi activados. Otra solución es más sencilla, pero requiere compilar el módulo.
	\item[Otras motivaciones] Hoy por hoy existe una gran expectación en cuanto a Ruby on Rails. Cada vez más webs se desarrollan con esta tecnología, y eso se demuestra en que cada vez más se pueden encontrar empresas de hosting con soporte para Rails. No hay ninguna razón objetiva para apoyar todas estas consideraciones, es posible que Rails no deje de ser una plataforma minoritaria, pero a día de hoy, tiene un crecimiento muy marcado que lo convierte en una plataforma muy atractiva a la hora de profundizar los conocimientos del autor en temas de desarrollo web.
	\item[Viabilidad] No hay ninguna razón para que este proyecto no sea viable bajo Ruby.
\end{description}

\subsubsection{Conclusión}
En este apartado las tres opciones que se han considerado son prácticamente igual de competentes. Si bien Ruby tiene más posibilidades de conseguir un desarrollo más rápido y de mayor calidad, es también el que necesitará más tiempo de aprendizaje. Debido a que las tres opciones son prácticamente equivalentes en cuanto a viabilidad se refiere, Ruby será en lenguaje escogido para este proyecto, como principal razón el interés del autor en estudiar áreas nuevas del desarrollo web.

\subsection{Entendiendo las Tecnologías}
El desarrollo de una página web no se puede tomar como el desarrollo de una aplicación cualquiera. Para este proyecto se han diferenciado dos partes que deberán seguir un desarrollo independiente antes de juntarse. El desarrollo de la pizarra si puede plantearse de forma similar a una aplicación, siempre teniendo en cuenta las grandes limitaciones que javascript impone. Es por eso que se considera importante entender lo máximo posible el lenguaje antes de empezarse a plantear como será el proceso de diseño, y posterior implementación.

No hay que olvidar tampoco, que gracias a que Ruby, o más concretamente Rails, ofrece una gran cantidad de opciones para automatizar tareas comunes en el desarrollo web, incluyendo pequeños trozos de javascript, también se intentará entender cual es el funcionamiento de Ruby, qué oportunidades ofrece Rails, y cómo puede ayudar en el desarrollo de la Pizarra.

En cuanto al desarrollo del sistema de la web, se seguirán los procesos típicos para ello, en este caso enfocado a Ruby on Rails, y las facilidades que nos aporta. Ruby on Rails, al fin y al cabo, considera que revoluciona la forma en que se desarrollan webs hoy día \footnote{Quotes about Ruby on Rails - \url{http://www.rubyonrails.org/quotes}}, por tanto conviene ver de qué tipo de revolución se está hablando.

\subsubsection{Javascript}
Las características básicas se han descrito anteriormente, pero es necesario entender más profundamente como funciona, y cual es el proceso típico de desarrollo de un javascript, para poder planear el desarrollo de la Pizarra. Se quiere evitar empezar a escribir código ciegamente sin tener un entendimiento previo de qué se está manejando.

\textbf{Orientado a Objetos}
El primer detalle importante sobre Javascript, es que es orientado a objetos. Cada elemento de una página se considera un objeto, y siempre existe una manera de acceder a él. Por ejemplo, si se tuviera una imagen definida así:
\begin{verbatim}
<img src="foo.jpg0" name="imagen1">
\end{verbatim}

Se podría acceder a su atributo \texttt{src} mediante:

\begin{verbatim}
document.images['imagen1'].src
\end{verbatim}

Es decir, existe el objeto \texttt{document}, que simboliza toda la página web, mediante el cual se accede al atributo \texttt{images}, que engloba todas las imágenes, el cual es un vector, y es posible acceder al que tiene de nombre ``imagen1'', y de ahí se accede al atributo \texttt{src}.

Mozilla Developer Center contiene un artículo\footnote{Introduction to Object-Oriented JavaScript - \url{http://developer.mozilla.org/en/docs/Introduction_to_Object-Oriented_JavaScript}} donde se explican todas las características de orientación a objetos en javascript, y como implementarlas con un ejemplo muy claro. Tiene una forma un tanto peculiar de crear y heredar elementos, pero es posible trabajar sin problemas, teniendo en cuenta que javascript no soporta herencias múltiples.

\textbf{Librería gráfica}
Es importante recordar que Javascript es un lenguaje de scripting sin ningún tipo de soporte para gráficos incorporado. Entendiéndolo de una forma lo más abstracta posible, lo que permite es tomar la página web como un documento de texto con formato (generalmente) XML, y realizar acciones sobre este texto (modificándolo por ejemplo), apoyándose en otras funciones del explorador. Dichas funciones podrían ser, consultar lo que el usuario ha introducido en formularios, acceder a variables del explorador (para saber la IP del usuario o el navegador que usa, por ejemplo), o lanzar pequeños avisos en forma de ventana de aviso. La mencionada anteriormebte técnica Ajax permite acciones un poco más elaboradas, como por ejemplo,consultar otras páginas (que contiene una lista los usuarios de una base de datos), y actuar acordemente (mostrando esa lista de usuarios en la página actual, sin haber tenido que recargar la página entera).

Así pues, si se quiere tratar con gráficos, hay que buscar una solución en la que Javascript pueda realizarlos modificando texto. La librería que se ha encontrado, jsgraphics\footnote{High Performance JavaScript Vector Graphics Library - \url{http://www.walterzorn.com/jsgraphics/jsgraphics_e.htm}}, soluciona esto generando múltiples elementos div de 1 pixel de tamaño. No son imágenes, pero visualmente lo parecen.

En busca de otras opciones para realizar esta función, se ha decidido investigar implementaciones actuales de aplicaciones web que realicen dibujos semejantes a los que se quieren lograr en este proyecto. Existen diversas implementaciones usando la librería mencionada anteriormente, pero gracias a skrbl\footnote{skrbl: easy to share online whiteboard\url{http://www.skrbl.com/}}, se ha descubierto otra opción muy interesante.

Los elementos que se quieren dibujar para este proyecto son perfectamente implementables por lo que se conoce como gráficos vectoriales. Círculos, líneas, cuadrados, texto, todo esto se puede hacer de forma sencilla con cualquier programa que permita editar este tipo de gráficos. Existe un formato abierto llamado SVG\footnote{Scalable Vector Graphics - \url{http://www.w3.org/Graphics/SVG/}}, cuyo formato no es binario como suelen ser los propietarios, sino especificado en XML. Gracias a esto, es posible crear y modificar gráficos vectoriales mediante Javascript. Un ejemplo de archivo SVG podría ser el de la figura \ref{fig:svg_example} (ejemplo extraido de Wikipedia)

\begin{figure}[ht]
\centering
\includegraphics{svg_example.png}
\begin{verbatim}
<?xml version="1.0"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
                     "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="467" height="462">
 
  <!-- This is for the red square -->
  <rect x="80" y="60" width="250" height="250" rx="20" fill="red"
         stroke="black" stroke-width="2px" />
  <!-- This is for the blue square -->
  <rect x="140" y="120" width="250" height="250" rx="40" fill="blue"
        fill-opacity="0.7" stroke="black" stroke-width="2px" />
</svg>
\end{verbatim}
\caption{Ejemplo simple de archivo svg}\label{fig:svg_example}
\end{figure}

Por desgracia, realizando pruebas sobre cómo se incluyen gráficos SVG en páginas web, se observa que dichos gráficos no funcionan en ninguna versión de Internet Explorer (Firefox y Safari funcionan sin problemas). Se descubre que es necesario un plugin para poder visualizar dichos archivos en este navegador, pero sin embargo se puede utilizar skrbl sin ningún problema. Se acaba descubriendo otro formato llamado VML\footnote{Vector Markup Language - \url{http://www.w3.org/TR/1998/NOTE-VML-19980513}}. El siguiente párrafo introductorio de la entrada sobre VML en la Wikipedia\footnote{Vector Markup Language, Wikipedia - \url{http://en.wikipedia.org/wiki/Vector_Markup_Language}} explica perfectamente porqué no funcionan los SVG en Internet Explorer:

\begin{quote}
	\textbf{Vector Markup Language (VML)} is an XML language used to produce vector graphics. VML was submitted as a proposed standard to the W3C in 1998 by Microsoft, Macromedia, and others, but was rejected as a web standard because Adobe, Sun, and others submitted a competing proposal known as PGML. The two standards were joined to create SVG.

Even though rejected as a standard by the W3C, and largely ignored by developers, Microsoft still implemented VML into Internet Explorer 5.0 and higher and in Microsoft Office 2000 and higher.
\end{quote}

A pesar de no ser la solución ideal, todos los Internet Explorer con versión 5.5 o superior implementan este lenguaje, con un formato similar al SVG. Es posible, por tanto, tratar con gráficos vectoriales en los navegadores mayoritarios (los que interesa en este proyecto), gracias a estos dos formatos. 

\textbf{Canvas}
Estas dos no son las únicas formas de tratar con gráficos vectoriales en páginas web. En la nueva especificación HTML (versión 5\footnote{W3C, HTML5 - \url{http://www.w3.org/html/wg/html5/}}, actualmente aún en formato borrador aún), se especifica un nuevo elemento, denominado \texttt{<canvas>}, y cuyo objetivo es la representación gráficos vectoriales directamente en la web. Es independiente de VML o SVG, y ya está implementado en los navegadores mayoritarios, excepto Internet Explorer. Existe, sin embargo, una librería en javascript\footnote{Explorer Canvas - \url{http://excanvas.sourceforge.net/}}, que automáticamente transforma cualquier elemento \texttt{<canvas>} en su equivalente en VML, por lo cual se puede considerar que es soportado en todos los exploradores mayoritarios actuales.

El funcionamiento de canvas es completamente distinto al de SVG y VML. Se basa en considerar que hay un puntero que puede ir haciendo diversos tipos de trazos. Se puede mover a cualquier punto dentro de un área definida, y moverse hacia otro haciendo el dibujo. Existen funciones para hacer todo tipo de ``trazos'', permitiendo dibujar líneas, círculos, y todo lo necesario.

Este tipo de planteamiento, sin embargo, no es adecuado para el tipo de aplicación que se pretende desarrollar. En el caso de la pizarra, existirán diferentes elementos que se irán añadiendo, quitando y modificando. El formato SVG o VML es ideal, puesto que está formado por dichos elementos, y para por ejemplo, crear un círculo, simplemente se añade una nueva etiqueta correspondiente a un círculo. En el caso de Canvas, sin embargo, habría que redibujar todo desde el principio, incluyendo el trazo final de un círculo. Básicamente, cada vez que se modifique algo en canvas, hay que redibujar todo de nuevo.

Por lo tanto, canvas es ideal para realiar dibujos estáticos, pero poco adecuado para realizar aplicaciones interactivas como será ésta.

\subsubsection{Ruby}
Ruby es un lenguaje inspirado en Perl, Smalltalk, Eiffel, Ada y Lisp, creado por Yukihiro ``matz'' Matsumoto\footnote{Acerca de Ruby - \url{http://www.ruby-lang.org/es/about/}}. Ruby en si es solo el lenguaje, y existen diferentes implementaciones. De ellas, la oficial está implementada en \texttt{C} y es interpretado en una sola pasada\footnote{Ruby, Wikipedia - \url{http://es.wikipedia.org/wiki/Ruby}}. Típicamente se puede ejecutar un archivo ruby desde la línea de comandos, con una linea parecida a la siguiente:

\begin{verbatim}
$ ruby archivo.rb
\end{verbatim}

\textbf{Desarrollando la web, Ruby on Rails}
Rails\footnote{Ruby on Rails - \url{http://www.rubyonrails.org/}} es una plataforma de desarrollo web basada en Ruby, que ayuda a desarrollar aplicaciones web, y que sigue el paradigma Modelo Vista Controlador. Dicho patrón es muy semejante al conocido patrón en 3 capas, separando la capa que trata con los datos, la que realiza operaciones, y la del interfaz. Rails es capaz de hacer la representación del modelo (dominio) por nosotros, simplemente observando la base de datos actual, genera los controladores para manejar los elementos (crear, borrar, modificar, listar, etc) y las vistas correspondientes a cada una de dichas operaciones. A partir de ahí, el programador solo debe modificar a su gusto lo que rails ha generado.

Este proceso de desarrollo hace que sea relativamente sencillo de adaptar al proceso típico de desarrollo de una pieza de software tradicional. Es posible empezar por especificar las clases del dominio, traducirlo a una base de datos, y dejar que Rails cree toda la estructura. A partir de ahí se puede empezar a implementar código obviando partes laboriosas como son las de tratar con la base de datos. Ahora se dispone de unas clases en Ruby, para cada clase del dominio, con una serie de funciones implementadas: listar, mostrar, crear, editar y destruir. Dichos controladores interactuan con el usuario mediante las vistas, cuya estructura es muy similar a los explicados anteriormente PHPs. En las vistas es donde se escribe el html, ayudado de todas las funciones que el controlador ofrece. Por ejemplo, un recorrido entre todos los elementos de una tabla, se lograría con:

\begin{verbatim}
<% for comment in @comments %>
...
<% end %>
\end{verbatim}

Pudiéndose incluir cualquier operación normal dentro de dicho bucle con líneas tan sencillas como:

\begin{verbatim}
<%= link_to 'Show', :action => 'show', :id => comment %>
<%= link_to 'Edit', :action => 'edit', :id => comment %>
\end{verbatim}

La primera línea crea un link con el texto ``Show'', que hace la acción \texttt{show} (la cual está implementada en el controlador), pasándole el parámetro \texttt{:id} con valor \texttt{comment}. 

Se puede ver que la forma de trabajar con Ruby on Rails es muy similar a la de una aplicación normal, acercando el concepto de página web al de una aplicación cualquiera más que nunca. Definitivamente, Rails ayudará a seguir un proceso de desarrollo ordenado y estructurado, con sus etapas de especificación, diseño e implementación bien diferenciadas, en contra de lo que normalmente se estaba acostumbrado.

\textbf{Instalando Ruby}
Uno de los requisitos establecidos es que fuera relativamente sencillo de instalar en un servidor típico web con Apache y MySQL. Para averiguar el procedimiento que se debería seguir, se ha realizado una instalación en una máquina con \emph{Ubuntu 7.10}. Existen numerosos tutoriales para hacer esto, pero se ha basado en el creado por el usuario \emph{Falko Timme} en HowtoForge\footnote{Using Ruby On Rails With Apache2 On Debian Etch - \url{http://howtoforge.com/ruby_on_rails_debian_etch}}. Puesto que se quiere entender cómo añadir soporte para Ruby a una máquina ya funcionando como servidor, se puede dar por hecho que hay Apache y MySQL instalados y funcionando.

Para empezar hay que instalar el soporte para Ruby en el sistema. Otros paquetes son necesarios, como por ejemplo Rails, pues las webs son desarrolladas con esta plataforma.

\begin{verbatim}
# apt-get install ruby libzlib-ruby rdoc irb rubygems rails eruby
\end{verbatim}

Una vez instalado el soporte de Ruby se puede comprobar su correcta instalación con el comando \texttt{ruby -v}. Después hace falta instalar \texttt{mod\_fcgid}\footnote{mod\_fcgid Home Page - \url{http://fastcgi.coremail.cn/}}. Este módulo se encarga de ejecutar scripts, independientemente del lenguaje en que hayan sido programados, ahorrando trabajo individual con cada lenguaje que se quiera añadir.

\begin{verbatim}
# apt-get install libapache2-mod-fcgid libfcgi-ruby1.8
\end{verbatim}

Se debería activar el módulo \texttt{mod\_rewrite}, pero es muy común, así que es posible que ya esté activado.
\begin{verbatim}
# a2enmod rewrite
\end{verbatim}

Para que Ruby pueda contactar con MySQL se debería instalar el paquete \texttt{libmysql-ruby} también:
\begin{verbatim}
# apt-get install libmysql-ruby
\end{verbatim}

Finalmente, solo queda asegurarse de que el archivo de configuración del vhost (Virtualhost) de Apache, del directorio donde se vayan a depositar las aplicaciones Ruby on Rails, tenga activadas las opciones \texttt{ExecCGI} y \texttt{FollowSymLinks}. Dicho archivo se suele poder encontrar en \texttt{/etc/apache2/sites-enabled/}, y las líneas de configuración del directorio deberían tener una forma parecida a la siguiente:

\begin{verbatim}
   <Directory /aplicacion/en/ruby/public>
      Options ExecCGI FollowSymLinks
      AllowOverride all
      Order allow,deny
      Allow from all
   </Directory>
\end{verbatim}

En resumen:
\begin{itemize}
	\item Instalar los paquetes  \texttt{ruby libzlib-ruby rdoc irb rubygems rails eruby libmysql-ruby}.
	\item Activar el módulo \texttt{mod\_rewrite} de apache.
	\item Activar las opciones \texttt{ExecCGI FollowSymLinks} en la configuración del directorio del vhost.
\end{itemize}

Se puede comprobar el correcto funcionamiento creando una aplicación de prueba mediante el comando \texttt{\$ rails /algun/directorio/}. Rails entonce creará la estructura básica, y solo hace falta apuntar con el navegador a \texttt{/algun/directorio/public/}. En el caso de la captura de pantalla, se ha definido el \texttt{DocumentRoot} de Apache esta carpeta directamente.

\begin{figure}[ht]
\centering
\includegraphics[width=16cm]{rubyapache.png}
\caption{Pantalla de bienvenida por defecto de rails}\label{fig:rubyapache}
\end{figure}

Existen múltiples opciones para configurar Apache de forma que soporte proyectos en Rails, un ejemplo es el proyecto \texttt{Passenger}, también llamado \texttt{mod\_rails}\footnote{Phusion Passenger - \url{http://www.modrails.com/}}, que requiere de pasos similares a los explicados anteriormente para utilizar fcgi.

\subsection{Otras consideraciones}
A lo largo de este documento no se ha tratado el tema de base de datos. Ante todas las opciones disponibles, se pueden descartar todas las que no sean libres, por un coste de licencias generalmente inalcanzable en el ámbito de este proyecto (no hay ningún tipo de subvención). De entre las opciones libres la base de datos por excelencia es MySQL\footnote{MySQL - \url{http://www.mysql.com/}}, que es considerada el compañero ideal para Ruby. A simple vista no existen requisitos extras que puedan hacer considerar alguna otra opción, por tanto se da por hecho que MySQL será el Sistema Gestor de Base de Datos de este proyecto.
